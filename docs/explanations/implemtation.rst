How it Works
============

This section is useful for users two classes of users


-  Those that wish to wish to create custom homing sequences from
   the existing snippets. A deep understanding is not required but will
   show how the sequences are built up.


-  Those wishing to contribute to the project and add their own snippets and /
   or callback functions. For this, good grasp of the concepts on this page is
   required.

Generating PLC code
-------------------

The output code is generated using a root jinja template called plc.pmc.jinja.

The render is passed a Plc object which has been generated by the definition
code. For example, consider the following definition code:

.. include:: ../tutorials/example.py
    :literal:

Executing the above will create the following structure to be passed to the
render.

- a `Plc` object which has `groups` that contains a single `Group` object
- the `Group` has `motors` which contains two `Motor` objects
- `Group` also has `templates` which contains a list of `Template` objects that
  represent the sequence of snippets of PLC code to be inserted for the
  enclosing group.

The `templates` list is created by the function `home_hsw` which is a
sequence of calls to `Snippet_Functions`.

When the Plc context completes `Plc.__exit__` is called and this will invoke
a render of the root jinja template

.. include:: ../../dls_motorhome/snippets/plc.pmc.jinja
    :lines: 93-109

