
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Snippet Functions &#8212; pmac_motorhome 1.12b1 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=dde60817"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=30646c52"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'reference/snippets';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.16.1';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://DiamondLightSource.github.io/pmac_motorhome/switcher.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '1.12b1';
        DOCUMENTATION_OPTIONS.show_version_warning_banner =
            false;
        </script>
    <link rel="icon" href="../_static/dls-logo.svg"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Constants" href="constants.html" />
    <link rel="prev" title="Predfined Homing Sequences" href="sequences.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="1.12b1" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/dls-logo.svg" class="logo__image only-light" alt=""/>
    <img src="../_static/dls-logo.svg" class="logo__image only-dark pst-js-only" alt=""/>
  
  
    <p class="title logo__title">pmac_motorhome</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../tutorials.html">
    Tutorials
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../how-to.html">
    How-to Guides
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../explanations.html">
    Explanations
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../reference.html">
    Reference
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/DiamondLightSource/pmac_motorhome" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/pmac_motorhome" title="PyPI" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fas fa-cube fa-lg" aria-hidden="true"></i>
            <span class="sr-only">PyPI</span></a>
        </li>
</ul></div>
      
        <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-2"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-2"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-2"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-2">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../tutorials.html">
    Tutorials
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../how-to.html">
    How-to Guides
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../explanations.html">
    Explanations
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../reference.html">
    Reference
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/DiamondLightSource/pmac_motorhome" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/pmac_motorhome" title="PyPI" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fas fa-cube fa-lg" aria-hidden="true"></i>
            <span class="sr-only">PyPI</span></a>
        </li>
</ul></div>
        
          <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-3"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-3"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-3"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-3">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="external.html">User API</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands.html">Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="sequences.html">Predfined Homing Sequences</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Snippet Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="constants.html">Constants</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="internal.html">Internal Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_api/pmac_motorhome.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../genindex.html">Index</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/DiamondLightSource/pmac_motorhome/releases">Release Notes</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../reference.html" class="nav-link">Reference</a></li>
    
    
    <li class="breadcrumb-item"><a href="external.html" class="nav-link">User API</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Snippet Functions</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="module-pmac_motorhome.snippets">
<span id="id1"></span><span id="snippet-functions"></span><h1>Snippet Functions<a class="headerlink" href="#module-pmac_motorhome.snippets" title="Link to this heading">#</a></h1>
<p>All of these functions will insert a small snippet of PLC code into the
generated PLC. Each snippet performs a specific action on all of the axes
in a group simultaneously.</p>
<p>These functions can all be called directly from
<a class="reference internal" href="overview.html#plcdefinition"><span class="std std-ref">Homing PLC definition file</span></a>. They should be called in the context of a Group object.</p>
<dl class="py data">
<dt class="sig sig-object py" id="pmac_motorhome.snippets.wait_for_done_args">
<span class="sig-prename descclassname"><span class="pre">pmac_motorhome.snippets.</span></span><span class="sig-name descname"><span class="pre">wait_for_done_args</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'no_following_err':</span> <span class="pre">False,</span> <span class="pre">'wait_for_one_motor':</span> <span class="pre">False,</span> <span class="pre">'with_limits':</span> <span class="pre">False}</span></em><a class="headerlink" href="#pmac_motorhome.snippets.wait_for_done_args" title="Link to this definition">#</a></dt>
<dd><p>A set of arguments to pass to the wait_for_done function</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pmac_motorhome.snippets.F">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pmac_motorhome.snippets.</span></span><span class="sig-name descname"><span class="pre">F</span></span><a class="headerlink" href="#pmac_motorhome.snippets.F" title="Link to this definition">#</a></dt>
<dd><p>A type to represent a callable function</p>
<p>alias of TypeVar(‘F’, bound=<a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Callable</span></code></a>)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pmac_motorhome.snippets.drive_to_limit">
<span class="sig-prename descclassname"><span class="pre">pmac_motorhome.snippets.</span></span><span class="sig-name descname"><span class="pre">drive_to_limit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'PreHomeMove'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">homing_direction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pmac_motorhome/snippets.html#drive_to_limit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pmac_motorhome.snippets.drive_to_limit" title="Link to this definition">#</a></dt>
<dd><p>Jog all of the group’s axes until they have each hit a limit</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>state</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Which homing state to report to EPICS for monitoring</p></li>
<li><p><strong>homing_direction</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – When True Jog in the same direction as
the axis’ homing direction, defaults False: opposite to homing direction</p></li>
</ul>
</dd>
</dl>
<p>This will cause the jinja template drive_to_limit.pmc.jinja to be expanded and inserted
into the PLC code. The template is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="p">{</span><span class="o">%</span> <span class="n">include</span> <span class="s2">&quot;debug_pause.pmc.jinja&quot;</span> <span class="o">%</span><span class="p">}</span>

    <span class="p">;</span><span class="o">----</span> <span class="p">{{</span><span class="n">template</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">state</span><span class="p">}}</span> <span class="n">State</span> <span class="o">----</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">HomingStatus</span> <span class="o">=</span> <span class="n">StatusHoming</span> <span class="ow">or</span> <span class="n">HomingStatus</span> <span class="o">=</span> <span class="n">StatusDebugHoming</span><span class="p">)</span>
        <span class="n">HomingState</span><span class="o">=</span><span class="n">State</span><span class="p">{{</span><span class="n">template</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">state</span><span class="p">}}</span>
        <span class="p">;</span> <span class="n">Execute</span> <span class="n">the</span> <span class="n">move</span> <span class="n">commands</span>
        <span class="p">{{</span> <span class="n">group</span><span class="o">.</span><span class="n">pre</span> <span class="k">if</span> <span class="n">template</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="s2">&quot;PreHomeMove&quot;</span> <span class="o">-</span><span class="p">}}</span>
        <span class="p">{{</span> <span class="n">group</span><span class="o">.</span><span class="n">set_large_jog_distance</span><span class="p">(</span><span class="n">homing_direction</span><span class="o">=</span><span class="n">template</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">homing_direction</span><span class="p">)</span> <span class="p">}}</span>
        <span class="n">cmd</span> <span class="s2">&quot;{{ group.jog_axes() }}&quot;</span>
        <span class="p">{</span><span class="o">%</span> <span class="n">include</span> <span class="s2">&quot;wait_for_done.pmc.jinja&quot;</span> <span class="o">%</span><span class="p">}</span>
    <span class="n">endif</span>
</pre></div>
</div>
<p>The included template wait_for_done.pmc.jinja allows this function to take these
additional parameters which all default to False:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>no_following_err</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – don’t check for following error during moves</p></li>
<li><p><strong>with_limits</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – check for limits during the move. When False we continue
waiting even if a subset of the axes have stopped on a limit</p></li>
<li><p><strong>wait_for_one_motor</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – stop wating as soon as one of the motors
has stopped instead of waiting for all motors</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pmac_motorhome.snippets.drive_off_home">
<span class="sig-prename descclassname"><span class="pre">pmac_motorhome.snippets.</span></span><span class="sig-name descname"><span class="pre">drive_off_home</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'FastRetrace'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">homing_direction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_limits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pmac_motorhome/snippets.html#drive_off_home"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pmac_motorhome.snippets.drive_off_home" title="Link to this definition">#</a></dt>
<dd><p>Jog all the group’s axes until the home flag is released</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>state</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Which homing state to report to EPICS for monitoring</p></li>
<li><p><strong>homing_direction</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – When True Jog in the same direction as
the axis’ homing direction, defaults False: opposite to homing direction</p></li>
<li><p><strong>with_limits</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – check for limits during the move</p></li>
</ul>
</dd>
</dl>
<p>This will cause the jinja template drive_off_home.pmc.jinja to be expanded and inserted
into the PLC code. The template is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="p">{</span><span class="o">%</span> <span class="n">include</span> <span class="s2">&quot;debug_pause.pmc.jinja&quot;</span> <span class="o">%</span><span class="p">}</span>

    <span class="p">{</span><span class="c1"># Invert the homing flags and the jog until the inverse of the home flag</span>
       <span class="n">triggers</span><span class="o">.</span>

       <span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span> <span class="k">for</span> <span class="n">an</span> <span class="n">axis</span> <span class="n">that</span> <span class="ow">is</span> <span class="n">home</span> <span class="n">on</span> <span class="n">release</span> <span class="n">of</span> <span class="n">limit</span> <span class="n">this</span> <span class="n">would</span> <span class="n">drive</span>
       <span class="n">onto</span> <span class="n">the</span> <span class="n">limit</span>  <span class="c1">#}</span>
    <span class="p">;</span><span class="o">----</span> <span class="p">{{</span><span class="n">template</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">state</span><span class="p">}}</span> <span class="n">State</span> <span class="o">----</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">HomingStatus</span> <span class="o">=</span> <span class="n">StatusHoming</span> <span class="ow">or</span> <span class="n">HomingStatus</span> <span class="o">=</span> <span class="n">StatusDebugHoming</span><span class="p">)</span>
        <span class="n">HomingState</span><span class="o">=</span><span class="n">State</span><span class="p">{{</span><span class="n">template</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">state</span><span class="p">}}</span>
        <span class="p">;</span> <span class="n">Execute</span> <span class="n">the</span> <span class="n">move</span> <span class="n">commands</span>
        <span class="p">{{</span> <span class="n">group</span><span class="o">.</span><span class="n">negate_home_flags</span><span class="p">()</span> <span class="p">}}</span> <span class="p">{{</span> <span class="n">group</span><span class="o">.</span><span class="n">set_large_jog_distance</span><span class="p">(</span><span class="n">homing_direction</span><span class="o">=</span><span class="n">template</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">homing_direction</span><span class="p">)</span> <span class="p">}}</span>
        <span class="n">cmd</span> <span class="s2">&quot;{{ group.jog_to_home_jdist() }}&quot;</span>
        <span class="p">{</span><span class="o">%</span> <span class="n">include</span> <span class="s2">&quot;wait_for_done.pmc.jinja&quot;</span> <span class="o">%</span><span class="p">}</span>
    <span class="n">endif</span>
</pre></div>
</div>
<p>The included template wait_for_done.pmc.jinja allows this function to take these
additional parameters which all default to False:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>no_following_err</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – don’t check for following error during moves</p></li>
<li><p><strong>with_limits</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – check for limits during the move. When False we continue
waiting even if a subset of the axes have stopped on a limit</p></li>
<li><p><strong>wait_for_one_motor</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – stop wating as soon as one of the motors
has stopped instead of waiting for all motors</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pmac_motorhome.snippets.store_position_diff">
<span class="sig-prename descclassname"><span class="pre">pmac_motorhome.snippets.</span></span><span class="sig-name descname"><span class="pre">store_position_diff</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pmac_motorhome/snippets.html#store_position_diff"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pmac_motorhome.snippets.store_position_diff" title="Link to this definition">#</a></dt>
<dd><p>Save the current offset from the original position.</p>
<p>This is only required in order to support driving back to initial position
after the home operation is complete</p>
<p>This will cause the jinja template store_position_diff.pmc.jinja to be expanded and inserted
into the PLC code. The template is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="p">;</span><span class="o">----</span> <span class="n">Store</span> <span class="n">the</span> <span class="n">difference</span> <span class="n">between</span> <span class="n">current</span> <span class="n">pos</span> <span class="ow">and</span> <span class="n">start</span> <span class="n">pos</span> <span class="o">----</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">HomingStatus</span> <span class="o">=</span> <span class="n">StatusHoming</span> <span class="ow">or</span> <span class="n">HomingStatus</span> <span class="o">=</span> <span class="n">StatusDebugHoming</span><span class="p">)</span>
        <span class="p">{{</span> <span class="n">group</span><span class="o">.</span><span class="n">store_position_diff</span><span class="p">()</span> <span class="p">}}</span>
    <span class="n">endif</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pmac_motorhome.snippets.drive_to_home">
<span class="sig-prename descclassname"><span class="pre">pmac_motorhome.snippets.</span></span><span class="sig-name descname"><span class="pre">drive_to_home</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'PreHomeMove'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">homing_direction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">restore_homed_flags</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pmac_motorhome/snippets.html#drive_to_home"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pmac_motorhome.snippets.drive_to_home" title="Link to this definition">#</a></dt>
<dd><p>Drive all axes in the group until they hit the home flag or a limit</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>state</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Which homing state to report to EPICS for monitoring</p></li>
<li><p><strong>homing_direction</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – When True Jog in the same direction as
each axis’ homing direction, defaults False: opposite to homing direction</p></li>
<li><p><strong>restore_homed_flags</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – restore the home flags original state before
starting. Required if a previous step changed the home flags</p></li>
</ul>
</dd>
</dl>
<p>This will cause the jinja template drive_to_home.pmc.jinja to be expanded and inserted
into the PLC code. The template is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="p">{</span><span class="o">%</span> <span class="n">include</span> <span class="s2">&quot;debug_pause.pmc.jinja&quot;</span> <span class="o">%</span><span class="p">}</span>

    <span class="p">;</span><span class="o">----</span> <span class="p">{{</span><span class="n">template</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">state</span><span class="p">}}</span> <span class="n">State</span> <span class="o">----</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">HomingStatus</span> <span class="o">=</span> <span class="n">StatusHoming</span> <span class="ow">or</span> <span class="n">HomingStatus</span> <span class="o">=</span> <span class="n">StatusDebugHoming</span><span class="p">)</span>
        <span class="n">HomingState</span><span class="o">=</span><span class="n">State</span><span class="p">{{</span><span class="n">template</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">state</span><span class="p">}}</span>
        <span class="p">;</span> <span class="n">Execute</span> <span class="n">the</span> <span class="n">move</span> <span class="n">commands</span>
        <span class="p">{{</span> <span class="n">group</span><span class="o">.</span><span class="n">pre</span> <span class="k">if</span> <span class="n">template</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="s2">&quot;PreHomeMove&quot;</span> <span class="p">}}</span>
        <span class="p">{</span><span class="o">%</span> <span class="k">if</span> <span class="n">template</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">restore_homed_flags</span> <span class="o">%</span><span class="p">}</span>
        <span class="p">{{</span> <span class="n">group</span><span class="o">.</span><span class="n">restore_home_flags</span><span class="p">()</span> <span class="p">}}</span> <span class="p">{{</span> <span class="n">group</span><span class="o">.</span><span class="n">set_large_jog_distance</span><span class="p">(</span><span class="n">homing_direction</span><span class="o">=</span><span class="n">template</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">homing_direction</span><span class="p">)</span> <span class="p">}}</span>
        <span class="p">{</span><span class="o">%</span> <span class="k">else</span> <span class="o">%</span><span class="p">}</span>
        <span class="p">{{</span> <span class="n">group</span><span class="o">.</span><span class="n">set_large_jog_distance</span><span class="p">(</span><span class="n">homing_direction</span><span class="o">=</span><span class="n">template</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">homing_direction</span><span class="p">)</span> <span class="p">}}</span>
        <span class="p">{</span><span class="o">%</span> <span class="n">endif</span> <span class="o">%</span><span class="p">}</span>
        <span class="n">cmd</span> <span class="s2">&quot;{{ group.jog_to_home_jdist() }}&quot;</span>
        <span class="p">{</span><span class="o">%</span> <span class="n">include</span> <span class="s2">&quot;wait_for_done.pmc.jinja&quot;</span> <span class="o">%</span><span class="p">}</span>
    <span class="n">endif</span>
</pre></div>
</div>
<p>The included template wait_for_done.pmc.jinja allows this function to take these
additional parameters which all default to False:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>no_following_err</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – don’t check for following error during moves</p></li>
<li><p><strong>with_limits</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – check for limits during the move. When False we continue
waiting even if a subset of the axes have stopped on a limit</p></li>
<li><p><strong>wait_for_one_motor</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – stop wating as soon as one of the motors
has stopped instead of waiting for all motors</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pmac_motorhome.snippets.drive_to_hstop">
<span class="sig-prename descclassname"><span class="pre">pmac_motorhome.snippets.</span></span><span class="sig-name descname"><span class="pre">drive_to_hstop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'PreHomeMove'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">homing_direction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">no_following_err</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pmac_motorhome/snippets.html#drive_to_hstop"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pmac_motorhome.snippets.drive_to_hstop" title="Link to this definition">#</a></dt>
<dd><p>Drive all axes in the group until they hit the hard stop (following error)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>state</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Which homing state to report to EPICS for monitoring</p></li>
<li><p><strong>homing_direction</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – When True Jog in the same direction as
each axis’ homing direction, defaults False: opposite to homing direction</p></li>
</ul>
</dd>
</dl>
<p>This will cause the jinja template drive_to_hstop.pmc.jinja to be expanded and inserted
into the PLC code. The template is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="p">{</span><span class="o">%</span> <span class="n">include</span> <span class="s2">&quot;debug_pause.pmc.jinja&quot;</span> <span class="o">%</span><span class="p">}</span>

    <span class="p">;</span><span class="o">----</span> <span class="p">{{</span><span class="n">template</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">state</span><span class="p">}}</span> <span class="n">State</span> <span class="o">----</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">HomingStatus</span> <span class="o">=</span> <span class="n">StatusHoming</span> <span class="ow">or</span> <span class="n">HomingStatus</span> <span class="o">=</span> <span class="n">StatusDebugHoming</span><span class="p">)</span>
        <span class="n">HomingState</span><span class="o">=</span><span class="n">State</span><span class="p">{{</span><span class="n">template</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">state</span><span class="p">}}</span>
        <span class="p">;</span> <span class="n">Execute</span> <span class="n">the</span> <span class="n">move</span> <span class="n">commands</span>
        <span class="p">{</span><span class="o">%</span> <span class="k">if</span> <span class="n">group</span><span class="o">.</span><span class="n">pre</span> <span class="ow">and</span> <span class="n">template</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="s2">&quot;PreHomeMove&quot;</span> <span class="o">%</span><span class="p">}</span>
        <span class="p">{{</span> <span class="n">group</span><span class="o">.</span><span class="n">pre</span> <span class="p">}}</span>
        <span class="p">{</span><span class="o">%</span> <span class="n">endif</span> <span class="o">%</span><span class="p">}</span>
        <span class="p">{{</span> <span class="n">group</span><span class="o">.</span><span class="n">set_inpos_trigger</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="p">}};</span> <span class="ow">in</span><span class="o">-</span><span class="n">position</span> <span class="n">trigger</span> <span class="n">on</span> <span class="n">following</span> <span class="n">error</span>
        <span class="p">{{</span> <span class="n">group</span><span class="o">.</span><span class="n">set_large_jog_distance</span><span class="p">(</span><span class="n">homing_direction</span><span class="o">=</span><span class="n">template</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">homing_direction</span><span class="p">)</span> <span class="p">}}</span>
        <span class="n">cmd</span> <span class="s2">&quot;{{ group.jog_to_home_jdist() }}&quot;</span>
        <span class="p">{</span><span class="o">%</span> <span class="n">include</span> <span class="s2">&quot;wait_for_done.pmc.jinja&quot;</span> <span class="o">%</span><span class="p">}</span>
        <span class="p">{{</span> <span class="n">group</span><span class="o">.</span><span class="n">set_inpos_trigger</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="p">}};</span> <span class="ow">in</span><span class="o">-</span><span class="n">position</span> <span class="n">trigger</span> <span class="n">on</span> <span class="n">hardware</span> <span class="n">capture</span>

    <span class="n">endif</span>
</pre></div>
</div>
<p>The included template wait_for_done.pmc.jinja allows this function to take these
additional parameters which all default to False:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>no_following_err</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – don’t check for following error during moves</p></li>
<li><p><strong>with_limits</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – check for limits during the move. When False we continue
waiting even if a subset of the axes have stopped on a limit</p></li>
<li><p><strong>wait_for_one_motor</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – stop wating as soon as one of the motors
has stopped instead of waiting for all motors</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pmac_motorhome.snippets.home">
<span class="sig-prename descclassname"><span class="pre">pmac_motorhome.snippets.</span></span><span class="sig-name descname"><span class="pre">home</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">with_limits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pmac_motorhome/snippets.html#home"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pmac_motorhome.snippets.home" title="Link to this definition">#</a></dt>
<dd><p>Initiate the home command on all axes in the group</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>with_limits</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – check for limits during the move</p>
</dd>
</dl>
<p>This will cause the jinja template home.pmc.jinja to be expanded and inserted
into the PLC code. The template is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="p">{</span><span class="o">%</span> <span class="n">include</span> <span class="s2">&quot;debug_pause.pmc.jinja&quot;</span> <span class="o">%</span><span class="p">}</span>

    <span class="p">;</span><span class="o">----</span> <span class="n">Homing</span> <span class="n">State</span> <span class="o">----</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">HomingStatus</span> <span class="o">=</span> <span class="n">StatusHoming</span> <span class="ow">or</span> <span class="n">HomingStatus</span> <span class="o">=</span> <span class="n">StatusDebugHoming</span><span class="p">)</span>
        <span class="n">HomingState</span><span class="o">=</span><span class="n">StateHoming</span>
        <span class="p">;</span> <span class="n">Execute</span> <span class="n">the</span> <span class="n">move</span> <span class="n">commands</span>
        <span class="p">{{</span> <span class="n">group</span><span class="o">.</span><span class="n">restore_home_flags</span><span class="p">()</span> <span class="p">}}</span>
        <span class="n">cmd</span> <span class="s2">&quot;{{ group.home() }}&quot;</span>
        <span class="p">{</span><span class="o">%</span> <span class="n">include</span> <span class="s2">&quot;wait_for_done.pmc.jinja&quot;</span> <span class="o">%</span><span class="p">}</span>
    <span class="n">endif</span>
</pre></div>
</div>
<p>The included template wait_for_done.pmc.jinja allows this function to take these
additional parameters which all default to False:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>no_following_err</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – don’t check for following error during moves</p></li>
<li><p><strong>with_limits</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – check for limits during the move. When False we continue
waiting even if a subset of the axes have stopped on a limit</p></li>
<li><p><strong>wait_for_one_motor</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – stop wating as soon as one of the motors
has stopped instead of waiting for all motors</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pmac_motorhome.snippets.debug_pause">
<span class="sig-prename descclassname"><span class="pre">pmac_motorhome.snippets.</span></span><span class="sig-name descname"><span class="pre">debug_pause</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pmac_motorhome/snippets.html#debug_pause"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pmac_motorhome.snippets.debug_pause" title="Link to this definition">#</a></dt>
<dd><p>When running in debug mode, pause until the user indicates to continue</p>
<p>This will cause the jinja template debug_pause.pmc.jinja to be expanded and inserted
into the PLC code. The template is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="p">;</span> <span class="n">Wait</span> <span class="k">for</span> <span class="n">user</span> <span class="n">to</span> <span class="n">tell</span> <span class="n">us</span> <span class="n">to</span> <span class="k">continue</span> <span class="k">if</span> <span class="ow">in</span> <span class="n">debug</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">HomingStatus</span> <span class="o">=</span> <span class="n">StatusDebugHoming</span><span class="p">)</span>
        <span class="n">HomingStatus</span> <span class="o">=</span> <span class="n">StatusPaused</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">HomingStatus</span> <span class="o">=</span> <span class="n">StatusPaused</span><span class="p">)</span>
        <span class="n">endw</span>
    <span class="n">endif</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pmac_motorhome.snippets.drive_to_initial_pos">
<span class="sig-prename descclassname"><span class="pre">pmac_motorhome.snippets.</span></span><span class="sig-name descname"><span class="pre">drive_to_initial_pos</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">with_limits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pmac_motorhome/snippets.html#drive_to_initial_pos"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pmac_motorhome.snippets.drive_to_initial_pos" title="Link to this definition">#</a></dt>
<dd><p>Return all axes in the group to their original positions before the homing
sequence began. Requires that store_position_diff was called before home.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>with_limits</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – check for limits during the move</p>
</dd>
</dl>
<p>This will cause the jinja template drive_to_initial_pos.pmc.jinja to be expanded and inserted
into the PLC code. The template is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="p">{</span><span class="o">%</span> <span class="n">include</span> <span class="s2">&quot;debug_pause.pmc.jinja&quot;</span> <span class="o">%</span><span class="p">}</span>

    <span class="p">;</span><span class="o">----</span> <span class="n">PostHomeMove</span> <span class="n">State</span> <span class="o">----</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">HomingStatus</span> <span class="o">=</span> <span class="n">StatusHoming</span> <span class="ow">or</span> <span class="n">HomingStatus</span> <span class="o">=</span> <span class="n">StatusDebugHoming</span><span class="p">)</span>
        <span class="n">HomingState</span><span class="o">=</span><span class="n">StatePostHomeMove</span>
        <span class="p">;</span> <span class="n">Execute</span> <span class="n">the</span> <span class="n">move</span> <span class="n">commands</span>
        <span class="p">{{</span> <span class="n">group</span><span class="o">.</span><span class="n">stored_pos_to_jogdistance</span><span class="p">()</span> <span class="p">}}</span>
        <span class="n">cmd</span> <span class="s2">&quot;{{ group.jog_distance() }}&quot;</span>
        <span class="p">{</span><span class="o">%</span> <span class="n">include</span> <span class="s2">&quot;wait_for_done.pmc.jinja&quot;</span> <span class="o">%</span><span class="p">}</span>
        <span class="p">{</span><span class="o">%</span> <span class="k">if</span> <span class="n">group</span><span class="o">.</span><span class="n">post</span> <span class="ow">and</span> <span class="n">group</span><span class="o">.</span><span class="n">post</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span> <span class="o">%</span><span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">HomingStatus</span> <span class="o">=</span> <span class="n">StatusHoming</span> <span class="ow">or</span> <span class="n">HomingStatus</span> <span class="o">=</span> <span class="n">StatusDebugHoming</span><span class="p">)</span>
            <span class="p">{{</span> <span class="n">group</span><span class="o">.</span><span class="n">post</span> <span class="p">}}</span>
        <span class="n">endif</span>
        <span class="p">{</span><span class="o">%</span> <span class="n">endif</span> <span class="o">%</span><span class="p">}</span>
    <span class="n">endif</span>
</pre></div>
</div>
<p>The included template wait_for_done.pmc.jinja allows this function to take these
additional parameters which all default to False:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>no_following_err</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – don’t check for following error during moves</p></li>
<li><p><strong>with_limits</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – check for limits during the move. When False we continue
waiting even if a subset of the axes have stopped on a limit</p></li>
<li><p><strong>wait_for_one_motor</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – stop wating as soon as one of the motors
has stopped instead of waiting for all motors</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pmac_motorhome.snippets.drive_to_soft_limit">
<span class="sig-prename descclassname"><span class="pre">pmac_motorhome.snippets.</span></span><span class="sig-name descname"><span class="pre">drive_to_soft_limit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">homing_direction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_limits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pmac_motorhome/snippets.html#drive_to_soft_limit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pmac_motorhome.snippets.drive_to_soft_limit" title="Link to this definition">#</a></dt>
<dd><p>Drive all axes in the group until they hit their soft limits</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>homing_direction</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – When True Jog in the same direction as
each axis’ homing direction, defaults False: opposite to homing direction</p></li>
<li><p><strong>with_limits</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – check for limits during the move</p></li>
</ul>
</dd>
</dl>
<p>This will cause the jinja template drive_to_soft_limit.pmc.jinja to be expanded and inserted
into the PLC code. The template is as follows:</p>
<pre class="literal-block">    {% include &quot;debug_pause.pmc.jinja&quot; %}

    ;---- PostHomeMove State ----
    if (HomingStatus = StatusHoming or HomingStatus = StatusDebugHoming)
        HomingState=StatePostHomeMove
        ; Execute the move commands
        {{ group.stored_limit_to_jogdistance(homing_direction=template.args.homing_direction) }}
        cmd &quot;{{ group.jog_distance() }}&quot;
        {% include &quot;wait_for_done.pmc.jinja&quot; %}
        {% if group.post and group.post != &quot;&quot; %}
        if (HomingStatus = StatusHoming or HomingStatus = StatusDebugHoming)
            {{ group.post }}
            endif
        {% endif %}
    endif
</pre>
<p>The included template wait_for_done.pmc.jinja allows this function to take these
additional parameters which all default to False:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>no_following_err</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – don’t check for following error during moves</p></li>
<li><p><strong>with_limits</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – check for limits during the move. When False we continue
waiting even if a subset of the axes have stopped on a limit</p></li>
<li><p><strong>wait_for_one_motor</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – stop wating as soon as one of the motors
has stopped instead of waiting for all motors</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pmac_motorhome.snippets.drive_relative">
<span class="sig-prename descclassname"><span class="pre">pmac_motorhome.snippets.</span></span><span class="sig-name descname"><span class="pre">drive_relative</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">set_home</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_limits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pmac_motorhome/snippets.html#drive_relative"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pmac_motorhome.snippets.drive_relative" title="Link to this definition">#</a></dt>
<dd><p>Drive all axes in the group a relative distance from current position</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>set_home</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – set the home flag afterward if True</p></li>
<li><p><strong>with_limits</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – check for limits during the move</p></li>
</ul>
</dd>
</dl>
<p>This will cause the jinja template drive_relative.pmc.jinja to be expanded and inserted
into the PLC code. The template is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="p">{</span><span class="o">%</span> <span class="n">include</span> <span class="s2">&quot;debug_pause.pmc.jinja&quot;</span> <span class="o">%</span><span class="p">}</span>

    <span class="p">;</span><span class="o">----</span> <span class="n">PostHomeMove</span> <span class="n">State</span> <span class="o">----</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">HomingStatus</span> <span class="o">=</span> <span class="n">StatusHoming</span> <span class="ow">or</span> <span class="n">HomingStatus</span> <span class="o">=</span> <span class="n">StatusDebugHoming</span><span class="p">)</span>
        <span class="n">HomingState</span><span class="o">=</span><span class="n">StatePostHomeMove</span>
        <span class="p">;</span> <span class="n">Execute</span> <span class="n">the</span> <span class="n">move</span> <span class="n">commands</span>
        <span class="n">cmd</span> <span class="s2">&quot;{{ group.jog_distance() }}&quot;</span>
        <span class="p">{</span><span class="o">%</span> <span class="n">include</span> <span class="s2">&quot;wait_for_done.pmc.jinja&quot;</span> <span class="o">%</span><span class="p">}</span>
        <span class="p">{</span><span class="o">%</span> <span class="k">if</span> <span class="n">group</span><span class="o">.</span><span class="n">post</span> <span class="ow">and</span> <span class="n">group</span><span class="o">.</span><span class="n">post</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span> <span class="o">%</span><span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">HomingStatus</span> <span class="o">=</span> <span class="n">StatusHoming</span> <span class="ow">or</span> <span class="n">HomingStatus</span> <span class="o">=</span> <span class="n">StatusDebugHoming</span><span class="p">)</span>
            <span class="p">{{</span> <span class="n">group</span><span class="o">.</span><span class="n">post</span><span class="p">}}</span>
        <span class="n">endif</span>
        <span class="p">{</span><span class="o">%</span> <span class="n">endif</span> <span class="o">%</span><span class="p">}</span>
    <span class="n">endif</span>

<span class="p">{</span><span class="o">%</span> <span class="k">if</span> <span class="n">template</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">set_home</span> <span class="o">%</span><span class="p">}</span>
    <span class="p">;</span><span class="o">----</span> <span class="n">Make</span> <span class="n">current</span> <span class="n">position</span> <span class="n">zero</span> <span class="o">----</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">HomingStatus</span> <span class="o">=</span> <span class="n">StatusHoming</span> <span class="ow">or</span> <span class="n">HomingStatus</span> <span class="o">=</span> <span class="n">StatusDebugHoming</span><span class="p">)</span>
        <span class="n">cmd</span> <span class="s2">&quot;{{ group.set_home() }}&quot;</span>
    <span class="n">endif</span>

<span class="p">{</span><span class="o">%</span> <span class="n">endif</span> <span class="o">%</span><span class="p">}</span>
</pre></div>
</div>
<p>The included template wait_for_done.pmc.jinja allows this function to take these
additional parameters which all default to False:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>no_following_err</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – don’t check for following error during moves</p></li>
<li><p><strong>with_limits</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – check for limits during the move. When False we continue
waiting even if a subset of the axes have stopped on a limit</p></li>
<li><p><strong>wait_for_one_motor</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – stop wating as soon as one of the motors
has stopped instead of waiting for all motors</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pmac_motorhome.snippets.zero_encoders">
<span class="sig-prename descclassname"><span class="pre">pmac_motorhome.snippets.</span></span><span class="sig-name descname"><span class="pre">zero_encoders</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pmac_motorhome/snippets.html#zero_encoders"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pmac_motorhome.snippets.zero_encoders" title="Link to this definition">#</a></dt>
<dd><p>Zero an associated encoders</p>
<p>This will cause the jinja template zero_encoders.pmc.jinja to be expanded and inserted
into the PLC code. The template is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="p">{</span><span class="o">%</span> <span class="k">if</span> <span class="n">group</span><span class="o">.</span><span class="n">has_encoders</span> <span class="o">%</span><span class="p">}</span>
    <span class="p">;</span><span class="o">----</span> <span class="n">Zero</span> <span class="n">encoder</span> <span class="n">channels</span> <span class="o">----</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">HomingStatus</span> <span class="o">=</span> <span class="n">StatusHoming</span> <span class="ow">or</span> <span class="n">HomingStatus</span> <span class="o">=</span> <span class="n">StatusDebugHoming</span><span class="p">)</span>
        <span class="n">cmd</span> <span class="s2">&quot;{{ group.set_home(encoder=True) }}&quot;</span>
    <span class="n">endif</span>
    <span class="p">{</span><span class="o">%</span> <span class="n">endif</span> <span class="o">%</span><span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pmac_motorhome.snippets.check_homed">
<span class="sig-prename descclassname"><span class="pre">pmac_motorhome.snippets.</span></span><span class="sig-name descname"><span class="pre">check_homed</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pmac_motorhome/snippets.html#check_homed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pmac_motorhome.snippets.check_homed" title="Link to this definition">#</a></dt>
<dd><p>Verfiy that all axes in the group are homed. Set error condition if not.</p>
<p>This will cause the jinja template check_homed.pmc.jinja to be expanded and inserted
into the PLC code. The template is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="p">;</span><span class="o">----</span> <span class="n">Check</span> <span class="k">if</span> <span class="nb">all</span> <span class="n">motors</span> <span class="n">have</span> <span class="n">homed</span> <span class="o">----</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">HomingStatus</span> <span class="o">=</span> <span class="n">StatusHoming</span> <span class="ow">or</span> <span class="n">HomingStatus</span> <span class="o">=</span> <span class="n">StatusDebugHoming</span><span class="p">)</span>
    <span class="ow">and</span> <span class="p">({{</span> <span class="n">group</span><span class="o">.</span><span class="n">homed</span><span class="p">()</span> <span class="p">}}</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">HomingStatus</span><span class="o">=</span><span class="n">StatusIncomplete</span>
    <span class="n">endif</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pmac_motorhome.snippets.drive_to_home_if_on_limit">
<span class="sig-prename descclassname"><span class="pre">pmac_motorhome.snippets.</span></span><span class="sig-name descname"><span class="pre">drive_to_home_if_on_limit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">homing_direction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pmac_motorhome/snippets.html#drive_to_home_if_on_limit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pmac_motorhome.snippets.drive_to_home_if_on_limit" title="Link to this definition">#</a></dt>
<dd><p>Drive axes to the home mark or switch. Only perform this action on
axes that are currently on a limit.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>homing_direction</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – When True Jog in the same direction as
each axis’ homing direction, defaults False: opposite to homing direction</p>
</dd>
</dl>
<p>This will cause the jinja template drive_to_home_if_on_limit.pmc.jinja to be expanded and inserted
into the PLC code. The template is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="c1"># TODO #}</span>
</pre></div>
</div>
<p>The included template wait_for_done.pmc.jinja allows this function to take these
additional parameters which all default to False:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>no_following_err</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – don’t check for following error during moves</p></li>
<li><p><strong>with_limits</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – check for limits during the move. When False we continue
waiting even if a subset of the axes have stopped on a limit</p></li>
<li><p><strong>wait_for_one_motor</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – stop wating as soon as one of the motors
has stopped instead of waiting for all motors</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pmac_motorhome.snippets.disable_limits">
<span class="sig-prename descclassname"><span class="pre">pmac_motorhome.snippets.</span></span><span class="sig-name descname"><span class="pre">disable_limits</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pmac_motorhome/snippets.html#disable_limits"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pmac_motorhome.snippets.disable_limits" title="Link to this definition">#</a></dt>
<dd><p>Disable the soft limits on all axes in the group</p>
<p>This will cause the jinja template disable_limits.pmc.jinja to be expanded and inserted
into the PLC code. The template is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="p">;</span><span class="o">----</span> <span class="n">Check</span> <span class="k">if</span> <span class="nb">any</span> <span class="n">limits</span> <span class="n">need</span> <span class="n">disabling</span> <span class="o">----</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">HomingStatus</span> <span class="o">=</span> <span class="n">StatusHoming</span> <span class="ow">or</span> <span class="n">HomingStatus</span> <span class="o">=</span> <span class="n">StatusDebugHoming</span><span class="p">)</span>
        <span class="p">;</span><span class="n">Save</span> <span class="n">the</span> <span class="n">user</span> <span class="n">home</span> <span class="n">flags</span> <span class="n">to</span> <span class="n">P</span> <span class="n">variables</span> <span class="n">px52</span><span class="o">..</span><span class="n">x67</span>
        <span class="p">;</span><span class="n">NOTE</span><span class="p">:</span> <span class="n">this</span> <span class="n">overwrites</span> <span class="n">inverse</span> <span class="n">flag</span> <span class="p">(</span><span class="n">ran</span> <span class="n">out</span> <span class="n">of</span> <span class="n">P</span> <span class="nb">vars</span><span class="p">),</span> <span class="n">so</span> <span class="n">can</span><span class="s1">&#39;t use inverse flag after this point</span>
            <span class="p">{{</span> <span class="n">group</span><span class="o">.</span><span class="n">overwrite_inverse_flags</span><span class="p">()</span> <span class="p">}}</span>
        <span class="p">{</span><span class="o">%</span> <span class="k">for</span> <span class="n">axis</span> <span class="ow">in</span> <span class="n">group</span><span class="o">.</span><span class="n">motors</span> <span class="o">-%</span><span class="p">}</span>
            <span class="p">{</span><span class="o">%</span> <span class="n">include</span> <span class="s1">&#39;disable_axis_limits.pmc.jinja&#39;</span> <span class="o">-%</span><span class="p">}</span>
        <span class="p">{</span><span class="o">%</span> <span class="n">endfor</span> <span class="o">%</span><span class="p">}</span>
    <span class="n">endif</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pmac_motorhome.snippets.restore_limits">
<span class="sig-prename descclassname"><span class="pre">pmac_motorhome.snippets.</span></span><span class="sig-name descname"><span class="pre">restore_limits</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pmac_motorhome/snippets.html#restore_limits"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pmac_motorhome.snippets.restore_limits" title="Link to this definition">#</a></dt>
<dd><p>Restore the saved soft limits on all axes on the group. By default the
Plc will always record the soft limits of all axes at the start.</p>
<p>This will cause the jinja template restore_limits.pmc.jinja to be expanded and inserted
into the PLC code. The template is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="p">;</span><span class="o">----</span> <span class="n">Restore</span> <span class="n">limits</span> <span class="k">if</span> <span class="n">needed</span> <span class="o">----</span>
    <span class="p">;</span><span class="n">Restore</span> <span class="n">the</span> <span class="n">limit</span> <span class="n">flags</span> <span class="n">to</span> <span class="n">P</span> <span class="n">variables</span> <span class="n">px68</span><span class="o">..</span><span class="n">x83</span>
    <span class="p">{{</span> <span class="n">group</span><span class="o">.</span><span class="n">restore_limit_flags</span><span class="p">()</span> <span class="p">}}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pmac_motorhome.snippets.drive_to_hard_limit">
<span class="sig-prename descclassname"><span class="pre">pmac_motorhome.snippets.</span></span><span class="sig-name descname"><span class="pre">drive_to_hard_limit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'PostHomeMove'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">homing_direction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pmac_motorhome/snippets.html#drive_to_hard_limit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pmac_motorhome.snippets.drive_to_hard_limit" title="Link to this definition">#</a></dt>
<dd><p>Drive all axes until they hit a hard limit.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>state</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Which homing state to report to EPICS for monitoring</p></li>
<li><p><strong>homing_direction</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – When True Jog in the same direction as
each axis’ homing direction, defaults False: opposite to homing direction</p></li>
</ul>
</dd>
</dl>
<p>This will cause the jinja template drive_to_hard_limit.pmc.jinja to be expanded and inserted
into the PLC code. The template is as follows:</p>
<pre class="literal-block">    {% include &quot;debug_pause.pmc.jinja&quot; %}

    ;---- {{template.args.state}} State ----
    if (HomingStatus = StatusHoming or HomingStatus = StatusDebugHoming)
        HomingState=State{{template.args.state}}
        ; Execute the move commands
        cmd &quot;{{ group.jog(homing_direction=template.args.homing_direction) }}&quot;
        {% include &quot;wait_for_done.pmc.jinja&quot; %}
        {% if group.post and group.post != &quot;&quot; %}
        if (HomingStatus = StatusHoming or HomingStatus = StatusDebugHoming)
            {{ group.post }}
            endif
        {% endif %}
    endif
</pre>
<p>The included template wait_for_done.pmc.jinja allows this function to take these
additional parameters which all default to False:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>no_following_err</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – don’t check for following error during moves</p></li>
<li><p><strong>with_limits</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – check for limits during the move. When False we continue
waiting even if a subset of the axes have stopped on a limit</p></li>
<li><p><strong>wait_for_one_motor</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – stop wating as soon as one of the motors
has stopped instead of waiting for all motors</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pmac_motorhome.snippets.jog_if_on_limit">
<span class="sig-prename descclassname"><span class="pre">pmac_motorhome.snippets.</span></span><span class="sig-name descname"><span class="pre">jog_if_on_limit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">homing_direction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_limits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pmac_motorhome/snippets.html#jog_if_on_limit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pmac_motorhome.snippets.jog_if_on_limit" title="Link to this definition">#</a></dt>
<dd><p>Jog all axes in the group that are currently on a limit</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>homing_direction</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – When True Jog in the same direction as
each axis’ homing direction, defaults False: opposite to homing direction</p>
</dd>
</dl>
<p>This will cause the jinja template jog_if_on_limit.pmc.jinja to be expanded and inserted
into the PLC code. The template is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="p">;</span><span class="o">----</span> <span class="n">Check</span> <span class="k">if</span> <span class="n">HSW_HLIM</span> <span class="n">missed</span> <span class="n">home</span> <span class="n">mark</span> <span class="ow">and</span> <span class="n">hit</span> <span class="n">a</span> <span class="n">limit</span> <span class="o">----</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">HomingStatus</span> <span class="o">=</span> <span class="n">StatusHoming</span> <span class="ow">or</span> <span class="n">HomingStatus</span> <span class="o">=</span> <span class="n">StatusDebugHoming</span><span class="p">)</span>
        <span class="p">;</span> <span class="n">Execute</span> <span class="n">the</span> <span class="n">move</span> <span class="n">commands</span> <span class="k">if</span> <span class="n">on</span> <span class="n">a</span> <span class="n">limit</span>
    <span class="p">{</span><span class="o">%-</span> <span class="k">for</span> <span class="n">motor</span> <span class="ow">in</span> <span class="n">group</span><span class="o">.</span><span class="n">motors</span> <span class="o">%</span><span class="p">}</span>
        <span class="p">{{</span><span class="o">-</span> <span class="n">group</span><span class="o">.</span><span class="n">set_axis_filter</span><span class="p">([</span><span class="n">motor</span><span class="o">.</span><span class="n">axis</span><span class="p">])</span> <span class="p">}}</span>
        <span class="k">if</span> <span class="p">({{</span> <span class="n">group</span><span class="o">.</span><span class="n">limits</span><span class="p">()</span> <span class="p">}}</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="p">{{</span> <span class="n">group</span><span class="o">.</span><span class="n">set_large_jog_distance</span><span class="p">(</span><span class="n">homing_direction</span><span class="o">=</span><span class="n">template</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">homing_direction</span><span class="p">)</span> <span class="p">}}</span>
            <span class="n">cmd</span> <span class="s2">&quot;{{ group.jog_to_home_jdist() }}&quot;</span>
        <span class="n">endif</span>
    <span class="p">{</span><span class="o">%-</span> <span class="n">endfor</span> <span class="o">%</span><span class="p">}</span>
        <span class="p">{{</span><span class="o">-</span> <span class="n">group</span><span class="o">.</span><span class="n">set_axis_filter</span><span class="p">([])</span> <span class="p">}}</span>
        <span class="p">{</span><span class="c1"># a unique variant of wait for done #}</span>
        <span class="p">;</span> <span class="n">Wait</span> <span class="k">for</span> <span class="n">the</span> <span class="n">move</span> <span class="n">to</span> <span class="n">complete</span>
        <span class="n">timer</span> <span class="o">=</span> <span class="mi">20</span> <span class="n">MilliSeconds</span> <span class="p">;</span> <span class="n">Small</span> <span class="n">delay</span> <span class="n">to</span> <span class="n">start</span> <span class="n">moving</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">timer</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">endw</span>
        <span class="n">timer</span> <span class="o">=</span> <span class="p">{{</span> <span class="n">plc</span><span class="o">.</span><span class="n">timeout</span> <span class="p">}}</span> <span class="n">MilliSeconds</span> <span class="p">;</span> <span class="n">Now</span> <span class="n">start</span> <span class="n">checking</span> <span class="n">the</span> <span class="n">conditions</span>
        <span class="k">while</span> <span class="p">({{</span> <span class="n">group</span><span class="o">.</span><span class="n">in_pos</span><span class="p">()</span> <span class="p">}}</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="p">;</span> <span class="n">At</span> <span class="n">least</span> <span class="n">one</span> <span class="n">motor</span> <span class="n">should</span> <span class="ow">not</span> <span class="n">be</span> <span class="n">In</span> <span class="n">Position</span>
        <span class="ow">and</span> <span class="p">({{</span> <span class="n">group</span><span class="o">.</span><span class="n">following_err</span><span class="p">()</span> <span class="p">}}</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">;</span> <span class="n">Following</span> <span class="n">error</span> <span class="n">check</span>
        <span class="ow">and</span> <span class="p">({{</span> <span class="n">group</span><span class="o">.</span><span class="n">limits</span><span class="p">()</span> <span class="p">}}</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="p">;</span> <span class="n">Should</span> <span class="ow">not</span> <span class="n">stop</span> <span class="n">on</span> <span class="n">position</span> <span class="n">limit</span> <span class="k">for</span> <span class="n">selected</span> <span class="n">motors</span>
        <span class="ow">and</span> <span class="p">(</span><span class="n">timer</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">;</span> <span class="n">Check</span> <span class="k">for</span> <span class="n">timeout</span>
        <span class="ow">and</span> <span class="p">(</span><span class="n">HomingStatus</span> <span class="o">=</span> <span class="n">StatusHoming</span> <span class="ow">or</span> <span class="n">HomingStatus</span> <span class="o">=</span> <span class="n">StatusDebugHoming</span><span class="p">)</span> <span class="p">;</span> <span class="n">Check</span> <span class="n">that</span> <span class="n">we</span> <span class="n">didn</span><span class="s1">&#39;t abort</span>
        <span class="n">endw</span>
        <span class="p">;</span> <span class="n">Check</span> <span class="n">why</span> <span class="n">we</span> <span class="n">left</span> <span class="n">the</span> <span class="k">while</span> <span class="n">loop</span>
        <span class="k">if</span> <span class="p">({{</span> <span class="n">group</span><span class="o">.</span><span class="n">following_err</span><span class="p">()</span> <span class="p">}}</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">;</span> <span class="n">Following</span> <span class="n">error</span> <span class="n">check</span> <span class="n">failed</span>
            <span class="n">HomingStatus</span> <span class="o">=</span> <span class="n">StatusFFErr</span>
        <span class="n">endif</span>
        <span class="k">if</span> <span class="p">({{</span> <span class="n">group</span><span class="o">.</span><span class="n">limits</span><span class="p">()</span> <span class="p">}}</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="p">;</span> <span class="n">If</span> <span class="n">a</span> <span class="n">motor</span> <span class="n">hit</span> <span class="n">a</span> <span class="n">limit</span>
            <span class="n">HomingStatus</span> <span class="o">=</span> <span class="n">StatusLimit</span>
        <span class="n">endif</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">timer</span><span class="o">&lt;</span><span class="mi">0</span> <span class="ow">or</span> <span class="n">timer</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="p">;</span> <span class="n">If</span> <span class="n">we</span> <span class="n">timed</span> <span class="n">out</span>
            <span class="n">HomingStatus</span> <span class="o">=</span> <span class="n">StatusTimeout</span>
        <span class="n">endif</span>
    <span class="n">endif</span>
</pre></div>
</div>
<p>The included template wait_for_done.pmc.jinja allows this function to take these
additional parameters which all default to False:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>no_following_err</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – don’t check for following error during moves</p></li>
<li><p><strong>with_limits</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – check for limits during the move. When False we continue
waiting even if a subset of the axes have stopped on a limit</p></li>
<li><p><strong>wait_for_one_motor</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – stop wating as soon as one of the motors
has stopped instead of waiting for all motors</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pmac_motorhome.snippets.continue_home_maintain_axes_offset">
<span class="sig-prename descclassname"><span class="pre">pmac_motorhome.snippets.</span></span><span class="sig-name descname"><span class="pre">continue_home_maintain_axes_offset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pmac_motorhome/snippets.html#continue_home_maintain_axes_offset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pmac_motorhome.snippets.continue_home_maintain_axes_offset" title="Link to this definition">#</a></dt>
<dd><p>Monitor axes that are homing and when one achieves home jog it in the
same direction as home. This is to avoid tilt on pairs of axes that have
misaligned home marks.</p>
<p>This will cause the jinja template continue_home_maintain_axes_offset.pmc.jinja to be expanded and inserted
into the PLC code. The template is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="p">;</span><span class="o">---</span> <span class="n">Homing</span> <span class="n">State</span> <span class="mi">2</span> <span class="o">----</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">HomingStatus</span> <span class="o">=</span> <span class="n">StatusHoming</span> <span class="ow">or</span> <span class="n">HomingStatus</span> <span class="o">=</span> <span class="n">StatusDebugHoming</span><span class="p">)</span>
        <span class="n">HomingState</span><span class="o">=</span><span class="n">StateHoming</span>
        <span class="p">;</span> <span class="n">This</span> <span class="n">block</span> <span class="n">to</span> <span class="n">be</span> <span class="n">used</span> <span class="n">after</span> <span class="n">a</span> <span class="n">home</span> <span class="n">block</span> <span class="k">with</span> <span class="n">wait_for_one_motor</span><span class="o">=</span><span class="kc">True</span><span class="o">.</span>
        <span class="p">;</span> <span class="n">It</span> <span class="n">allows</span> <span class="n">motors</span> <span class="n">to</span> <span class="k">continue</span> <span class="n">to</span> <span class="n">home</span> <span class="n">but</span> <span class="n">restarts</span> <span class="n">those</span> <span class="n">that</span> <span class="n">have</span> <span class="n">already</span>
        <span class="p">;</span> <span class="n">reached</span> <span class="n">home</span><span class="o">.</span> <span class="n">For</span> <span class="n">use</span> <span class="k">with</span> <span class="n">axes</span> <span class="n">that</span> <span class="n">are</span> <span class="n">sensitve</span> <span class="n">to</span> <span class="n">tilt</span> <span class="n">but</span> <span class="n">do</span> <span class="ow">not</span> <span class="n">have</span>
        <span class="p">;</span> <span class="n">aligned</span> <span class="n">home</span> <span class="n">marks</span>

        <span class="p">;</span> <span class="n">make</span> <span class="n">sure</span> <span class="nb">all</span> <span class="n">jogs</span> <span class="n">will</span> <span class="n">be</span> <span class="n">a</span> <span class="n">long</span> <span class="n">distance</span>
        <span class="p">{{</span> <span class="n">group</span><span class="o">.</span><span class="n">set_large_jog_distance</span><span class="p">(</span><span class="n">homing_direction</span><span class="o">=</span><span class="n">template</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">homing_direction</span><span class="p">)</span> <span class="p">}}</span>

        <span class="p">;</span> <span class="k">continue</span> <span class="n">processing</span> <span class="n">until</span> <span class="nb">all</span> <span class="n">motors</span> <span class="n">are</span> <span class="n">homed</span> <span class="ow">or</span> <span class="n">something</span> <span class="n">goes</span> <span class="n">wrong</span>
        <span class="n">timer</span> <span class="o">=</span> <span class="p">{{</span> <span class="n">plc</span><span class="o">.</span><span class="n">timeout</span> <span class="p">}}</span> <span class="n">MilliSeconds</span>
        <span class="k">while</span> <span class="p">({{</span><span class="n">group</span><span class="o">.</span><span class="n">homed</span><span class="p">()}}</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">;</span> <span class="n">at</span> <span class="n">least</span> <span class="n">one</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">homed</span>
        <span class="ow">and</span> <span class="p">({{</span><span class="n">group</span><span class="o">.</span><span class="n">following_err</span><span class="p">()}}</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">;</span> <span class="n">there</span> <span class="n">are</span> <span class="n">no</span> <span class="n">following</span> <span class="n">errors</span>
        <span class="ow">and</span> <span class="p">({{</span><span class="n">group</span><span class="o">.</span><span class="n">in_pos</span><span class="p">()}}</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">;</span> <span class="n">at</span> <span class="n">least</span> <span class="n">one</span> <span class="ow">is</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">postion</span>
        <span class="ow">and</span> <span class="p">(</span><span class="n">timer</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">;</span> <span class="n">Check</span> <span class="k">for</span> <span class="n">timeout</span>
            <span class="p">;</span> <span class="n">jog</span> <span class="nb">any</span> <span class="n">motors</span> <span class="n">that</span> <span class="n">have</span> <span class="n">stopped</span> <span class="n">on</span> <span class="n">home</span>
            <span class="p">{</span><span class="o">%</span> <span class="nb">filter</span> <span class="n">indent</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span> <span class="o">%</span><span class="p">}</span>
            <span class="p">{{</span> <span class="n">group</span><span class="o">.</span><span class="n">jog_stopped</span><span class="p">()</span> <span class="p">}}</span>
            <span class="p">{</span><span class="o">%</span> <span class="n">endfilter</span> <span class="o">%</span><span class="p">}</span>
        <span class="n">endw</span>
        <span class="p">;</span> <span class="n">Check</span> <span class="n">why</span> <span class="n">we</span> <span class="n">left</span> <span class="n">the</span> <span class="k">while</span> <span class="n">loop</span>
        <span class="k">if</span> <span class="p">({{</span> <span class="n">group</span><span class="o">.</span><span class="n">following_err</span><span class="p">()</span> <span class="p">}}</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">;</span> <span class="n">Following</span> <span class="n">error</span> <span class="n">check</span> <span class="n">failed</span>
            <span class="n">HomingStatus</span> <span class="o">=</span> <span class="n">StatusFFErr</span>
        <span class="n">endif</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">timer</span><span class="o">&lt;</span><span class="mi">0</span> <span class="ow">or</span> <span class="n">timer</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="p">;</span> <span class="n">If</span> <span class="n">we</span> <span class="n">timed</span> <span class="n">out</span>
            <span class="n">HomingStatus</span> <span class="o">=</span> <span class="n">StatusTimeout</span>
        <span class="n">endif</span>
    <span class="n">endif</span>
</pre></div>
</div>
<p>The included template wait_for_done.pmc.jinja allows this function to take these
additional parameters which all default to False:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>no_following_err</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – don’t check for following error during moves</p></li>
<li><p><strong>with_limits</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – check for limits during the move. When False we continue
waiting even if a subset of the axes have stopped on a limit</p></li>
<li><p><strong>wait_for_one_motor</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – stop wating as soon as one of the motors
has stopped instead of waiting for all motors</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pmac_motorhome.snippets.post_home_action">
<span class="sig-prename descclassname"><span class="pre">pmac_motorhome.snippets.</span></span><span class="sig-name descname"><span class="pre">post_home_action</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pmac_motorhome/snippets.html#post_home_action"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pmac_motorhome.snippets.post_home_action" title="Link to this definition">#</a></dt>
<dd><p>Insert an extra block with the group’s post home action in it</p>
<p>This will cause the jinja template post_home_action.pmc.jinja to be expanded and inserted
into the PLC code. The template is as follows:</p>
<pre class="literal-block">    {% if group.post and group.post != &quot;&quot; %}
    {% include &quot;debug_pause.pmc.jinja&quot; %}

    ;---- PostHomeMove State ----
        if (HomingStatus = StatusHoming or HomingStatus = StatusDebugHoming)
                HomingState=StatePostHomeMove
                ; Execute the move commands
                if (HomingStatus = StatusHoming or HomingStatus = StatusDebugHoming)
            {{ group.post }}
                endif
        endif

    {% endif %}
</pre>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pmac_motorhome.snippets.pre_home_action">
<span class="sig-prename descclassname"><span class="pre">pmac_motorhome.snippets.</span></span><span class="sig-name descname"><span class="pre">pre_home_action</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pmac_motorhome/snippets.html#pre_home_action"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pmac_motorhome.snippets.pre_home_action" title="Link to this definition">#</a></dt>
<dd><p>Insert an extra block with the group’s pre home action in it</p>
<p>This will cause the jinja template pre_home_action.pmc.jinja to be expanded and inserted
into the PLC code. The template is as follows:</p>
<pre class="literal-block">    {% if group.pre and group.pre != &quot;&quot; %}
    {% include &quot;debug_pause.pmc.jinja&quot; %}

    ;---- PreHomeMove State ----
        if (HomingStatus = StatusHoming or HomingStatus = StatusDebugHoming)
                HomingState=StatePreHomeMove
                ; Execute the move commands
        {{ group.pre }}
        endif
    {% endif %}
</pre>
</dd></dl>

</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="sequences.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Predfined Homing Sequences</p>
      </div>
    </a>
    <a class="right-next"
       href="constants.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Constants</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pmac_motorhome.snippets.wait_for_done_args"><code class="docutils literal notranslate"><span class="pre">wait_for_done_args</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pmac_motorhome.snippets.F"><code class="docutils literal notranslate"><span class="pre">F</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pmac_motorhome.snippets.drive_to_limit"><code class="docutils literal notranslate"><span class="pre">drive_to_limit()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pmac_motorhome.snippets.drive_off_home"><code class="docutils literal notranslate"><span class="pre">drive_off_home()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pmac_motorhome.snippets.store_position_diff"><code class="docutils literal notranslate"><span class="pre">store_position_diff()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pmac_motorhome.snippets.drive_to_home"><code class="docutils literal notranslate"><span class="pre">drive_to_home()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pmac_motorhome.snippets.drive_to_hstop"><code class="docutils literal notranslate"><span class="pre">drive_to_hstop()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pmac_motorhome.snippets.home"><code class="docutils literal notranslate"><span class="pre">home()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pmac_motorhome.snippets.debug_pause"><code class="docutils literal notranslate"><span class="pre">debug_pause()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pmac_motorhome.snippets.drive_to_initial_pos"><code class="docutils literal notranslate"><span class="pre">drive_to_initial_pos()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pmac_motorhome.snippets.drive_to_soft_limit"><code class="docutils literal notranslate"><span class="pre">drive_to_soft_limit()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pmac_motorhome.snippets.drive_relative"><code class="docutils literal notranslate"><span class="pre">drive_relative()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pmac_motorhome.snippets.zero_encoders"><code class="docutils literal notranslate"><span class="pre">zero_encoders()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pmac_motorhome.snippets.check_homed"><code class="docutils literal notranslate"><span class="pre">check_homed()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pmac_motorhome.snippets.drive_to_home_if_on_limit"><code class="docutils literal notranslate"><span class="pre">drive_to_home_if_on_limit()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pmac_motorhome.snippets.disable_limits"><code class="docutils literal notranslate"><span class="pre">disable_limits()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pmac_motorhome.snippets.restore_limits"><code class="docutils literal notranslate"><span class="pre">restore_limits()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pmac_motorhome.snippets.drive_to_hard_limit"><code class="docutils literal notranslate"><span class="pre">drive_to_hard_limit()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pmac_motorhome.snippets.jog_if_on_limit"><code class="docutils literal notranslate"><span class="pre">jog_if_on_limit()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pmac_motorhome.snippets.continue_home_maintain_axes_offset"><code class="docutils literal notranslate"><span class="pre">continue_home_maintain_axes_offset()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pmac_motorhome.snippets.post_home_action"><code class="docutils literal notranslate"><span class="pre">post_home_action()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pmac_motorhome.snippets.pre_home_action"><code class="docutils literal notranslate"><span class="pre">pre_home_action()</span></code></a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  
  <div class="tocsection editthispage">
    <a href="https://github.com/DiamondLightSource/pmac_motorhome/edit/1.12b1/docs/reference/snippets.rst">
      <i class="fa-solid fa-pencil"></i>
      
      
        
          Edit on GitHub
        
      
    </a>
  </div>
</div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/reference/snippets.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>